# Render service definitions for backend (FastAPI) and optional worker
services:
  - type: web
    name: ai-intel-backend
    env: docker
    repo: https://github.com/<your-org>/ai-website-intelligence-platform
    branch: main
    dockerfilePath: backend/Dockerfile
    plan: starter
    autoDeploy: true
    buildCommand: ""
    startCommand: "uvicorn main:app --host 0.0.0.0 --port $PORT"
    envVars:
      - key: FIREBASE_PROJECT_ID
        sync: false
      - key: FIREBASE_CLIENT_EMAIL
        sync: false
      - key: FIREBASE_PRIVATE_KEY
        sync: false
      - key: FIREBASE_DATABASE_URL
        sync: false
      - key: STRIPE_API_KEY
        sync: false
      - key: STRIPE_WEBHOOK_SECRET
        sync: false
      - key: HUGGINGFACE_API_TOKEN
        sync: false
      - key: GROQ_API_KEY
        sync: false
      - key: ALLOWED_ORIGINS
        sync: false
    healthCheckPath: /health
    scale:
      minInstances: 1
      maxInstances: 3

  - type: worker
    name: ai-intel-worker
    env: docker
    repo: https://github.com/<your-org>/ai-website-intelligence-platform
    branch: main
    dockerfilePath: backend/Dockerfile
    plan: starter
    autoDeploy: true
    startCommand: "python worker.py"
    envVars:
      - key: FIREBASE_PROJECT_ID
        sync: false
      - key: FIREBASE_CLIENT_EMAIL
        sync: false
      - key: FIREBASE_PRIVATE_KEY
        sync: false
      - key: FIREBASE_DATABASE_URL
        sync: false
